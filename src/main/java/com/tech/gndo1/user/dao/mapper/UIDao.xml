<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.tech.gndo1.user.dao.UIDao">
	<!-- 소비자 닉네임 중복검사 -->
	<select id="check_nk" resultType="Integer">
		SELECT COUNT(MEM_NICKNAME) COUNT FROM MEMBERS WHERE MEM_NICKNAME=#{param1}
	</select>
	<!--중복검사, 로그인유효성 검사(id)-->
	<select id="check_mem" resultType="Integer">
		SELECT COUNT(MEM_ID) COUNT FROM MEMBERS WHERE MEM_ID=#{param1}
	</select>
	<select id="check_cpy" resultType="Integer">
		SELECT COUNT(CPY_ID) COUNT FROM COMPANY WHERE CPY_ID=#{param1}
	</select>
	<!-- 사업자등록번호 중복검사 -->
	<select id="check_cpyNum" resultType="Integer">
		SELECT COUNT(CPY_CPNUM) COUNT FROM COMPANY WHERE CPY_CPNUM=#{param1}
	</select>
	<!--로그인 유효성 검사(pwd)-->
	<select id="login_checkmpwd" resultType="com.tech.gndo1.mb.dto.MembersDto">
		SELECT MEM_PWD, MEM_LOGKEY FROM MEMBERS WHERE MEM_ID=#{param1}
	</select>
	<select id="login_checkcpwd" resultType="com.tech.gndo1.cp.dto.CompanyDto">
		SELECT CPY_PWD, CPY_LOGKEY FROM COMPANY WHERE CPY_ID=#{param1}
	</select>
	<!--로그인 시 회원정보 불러오기-->
	<select id="members" resultType="com.tech.gndo1.mb.dto.MembersDto">
		SELECT * FROM MEMBERS WHERE MEM_ID=#{param1}	
	</select>
	<select id="company" resultType="com.tech.gndo1.cp.dto.CompanyDto">
		SELECT * FROM COMPANY WHERE CPY_ID=#{param1}	
	</select>
	<!-- 회원가입  -->
	<insert id="insertCompany">
      INSERT INTO COMPANY VALUES(COMPANY_SEQ.NEXTVAL,#{param1},#{param2},#{param3},#{param4},#{param5},#{param6},#{param7},#{param8},SYSDATE,#{param9})
   </insert>
   <insert id="insertMembers">
      INSERT INTO MEMBERS VALUES(MEMBERS_SEQ.NEXTVAL,#{param1},#{param2},#{param3},#{param4},#{param5},#{param6},#{param7},#{param8},#{param9},SYSDATE,#{param10})
   </insert>
</mapper>